const RADIO_NAME="MYXX FM | Spanglish Hits Live Here";var API_SERVICE="ITUNES";const URL_STREAMING="https://forwardmystream.com/myxxfmhd",API_URL="https://api.streamafrica.net/metadata/index.php?z="+URL_STREAMING,API_KEY="18fe07917957c289983464588aabddfb";function Page(){this.changeTitlePage=function(e=RADIO_NAME){document.title=e},this.refreshCurrentSong=function(e,a){var t=document.getElementById("currentSong"),o=document.getElementById("currentArtist");e!==t.innerHTML&&(t.className="animated flipInY text-uppercase",t.innerHTML=e,o.className="animated flipInY text-capitalize",o.innerHTML=a,document.getElementById("lyricsSong").innerHTML=e+" - "+a,setTimeout(function(){t.className="text-uppercase",o.className="text-capitalize"},2e3))},this.refreshHistoric=function(e,a){var t=document.querySelectorAll("#historicSong article"),o=document.querySelectorAll("#historicSong article .music-info .song"),n=document.querySelectorAll("#historicSong article .music-info .artist"),i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var i=JSON.parse(this.responseText).results.artwork;document.querySelectorAll("#historicSong article .cover-historic")[a].style.backgroundImage="url("+i+")"}var r=e.song.replace(/&apos;/g,"'").replace(/&amp;/g,"&"),s=e.artist.replace(/&apos;/g,"'").replace(/&amp;/g,"&");o[a].innerHTML=r,n[a].innerHTML=s,t[a].classList.add("animated"),t[a].classList.add("slideInRight")},i.open("GET","https://api.streamafrica.net/new.search.php?query="+e.artist+" "+e.song+"&service="+API_SERVICE.toLowerCase()),i.send(),setTimeout(function(){for(var e=0;e<2;e++)t[e].classList.remove("animated"),t[e].classList.remove("slideInRight")},2e3)},this.refreshCover=function(e="",a){var t=new XMLHttpRequest;t.onreadystatechange=function(){var t=document.getElementById("currentCoverArt"),o=document.getElementById("bgCover");if(4===this.readyState&&200===this.status){var n=JSON.parse(this.responseText).results.artwork;t.style.backgroundImage="url("+n+")",t.className="animated bounceInLeft",o.style.backgroundImage="url("+n+")",setTimeout(function(){t.className=""},2e3),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:e,artist:a,artwork:[{src:n,sizes:"96x96",type:"image/png"},{src:n,sizes:"128x128",type:"image/png"},{src:n,sizes:"192x192",type:"image/png"},{src:n,sizes:"256x256",type:"image/png"},{src:n,sizes:"384x384",type:"image/png"},{src:n,sizes:"512x512",type:"image/png"}]}))}},t.open("GET","https://api.streamafrica.net/new.search.php?query="+a+" "+e+"&service="+API_SERVICE.toLowerCase()),t.send()},this.changeVolumeIndicator=function(e){document.getElementById("volIndicator").innerHTML=e,"undefined"!=typeof Storage&&localStorage.setItem("volume",e)},this.setVolume=function(){if("undefined"!=typeof Storage){var e=localStorage.getItem("volume")?localStorage.getItem("volume"):80;document.getElementById("volume").value=e,document.getElementById("volIndicator").innerHTML=e}},this.refreshLyric=function(e,a){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText),a=document.getElementsByClassName("lyrics")[0];if("exact"===e.type||"aprox"===e.type){var t=e.mus[0].text;document.getElementById("lyric").innerHTML=t.replace(/\n/g,"<br />"),a.style.opacity="1",a.setAttribute("data-toggle","modal")}else{a.style.opacity="0.3",a.removeAttribute("data-toggle");var o=document.getElementById("modalLyrics");o.style.display="none",o.setAttribute("aria-hidden","true"),document.getElementsByClassName("modal-backdrop")[0]&&document.getElementsByClassName("modal-backdrop")[0].remove()}}else document.getElementsByClassName("lyrics")[0].style.opacity="0.3",document.getElementsByClassName("lyrics")[0].removeAttribute("data-toggle")},t.open("GET","https://api.vagalume.com.br/search.php?apikey=18fe07917957c289983464588aabddfb&art="+a+"&mus="+e.toLowerCase(),!0),t.send()}}window.onload=function(){var e=new Page;e.changeTitlePage(),e.setVolume(),new Player().play(),getStreamingData(),setInterval(function(){getStreamingData()},1e4);var a=document.getElementsByClassName("cover-album")[0];a.style.height=a.offsetWidth+"px"};var audio=new Audio(URL_STREAMING);function Player(){this.play=function(){audio.play();var e=document.getElementById("volume").value;"undefined"!=typeof Storage&&null!==localStorage.getItem("volume")?audio.volume=intToDecimal(localStorage.getItem("volume")):audio.volume=intToDecimal(e),document.getElementById("volIndicator").innerHTML=e},this.pause=function(){audio.pause()}}function togglePlay(){audio.paused?(audio.load(),audio.play()):audio.pause()}function volumeUp(){var e=audio.volume;audio&&audio.volume>=0&&audio.volume<1&&(audio.volume=(e+.01).toFixed(2))}function volumeDown(){var e=audio.volume;audio&&audio.volume>=.01&&audio.volume<=1&&(audio.volume=(e-.01).toFixed(2))}function mute(){if(audio.muted){var e=localStorage.getItem("volume");document.getElementById("volIndicator").innerHTML=e,document.getElementById("volume").value=e,audio.volume=intToDecimal(e),audio.muted=!1}else document.getElementById("volIndicator").innerHTML=0,document.getElementById("volume").value=0,audio.volume=0,audio.muted=!0}function getStreamingData(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){0===this.response.length&&console.log("%cdebug","font-size: 22px");var e=JSON.parse(this.responseText),a=new Page;let t=e.currentSong.replace(/&apos;/g,"'");currentSong=t.replace(/&amp;/g,"&");if(currentArtist=e.currentArtist.replace(/&apos;/g,"'").replace(/&amp;/g,"&"),document.title=currentSong+" - "+currentArtist+" | "+RADIO_NAME,document.getElementById("currentSong").innerHTML!==t){a.refreshCover(currentSong,currentArtist),a.refreshCurrentSong(currentSong,currentArtist),a.refreshLyric(currentSong,currentArtist);for(var o=0;o<2;o++)a.refreshHistoric(e.songHistory[o],o)}}},e.open("GET",API_URL),e.send()}function intToDecimal(e){return e/100}function decimalToInt(e){return 100*e}audio.onplay=function(){var e=document.getElementById("playerButton"),a=document.getElementById("buttonPlay");"fa fa-play"===e.className&&(e.className="fa fa-pause",a.firstChild.data="PAUSE")},audio.onpause=function(){var e=document.getElementById("playerButton"),a=document.getElementById("buttonPlay");"fa fa-pause"===e.className&&(e.className="fa fa-play",a.firstChild.data="PLAY")},audio.onvolumechange=function(){audio.volume>0&&(audio.muted=!1)},audio.onerror=function(){confirm("Stream Down / Network Error. \nClick OK to try again.")&&window.location.reload()},document.getElementById("volume").oninput=function(){audio.volume=intToDecimal(this.value),new Page().changeVolumeIndicator(this.value)},document.addEventListener("keydown",function(e){var e=e||window.event,a=e.keyCode||e.which,t=document.getElementById("volume"),o=new Page;switch(a){case 38:volumeUp(),t.value=decimalToInt(audio.volume),o.changeVolumeIndicator(decimalToInt(audio.volume));break;case 40:volumeDown(),t.value=decimalToInt(audio.volume),o.changeVolumeIndicator(decimalToInt(audio.volume));break;case 32:case 80:togglePlay();break;case 77:mute();break;case 48:case 96:audio.volume=0,t.value=0,o.changeVolumeIndicator(0);break;case 49:case 97:audio.volume=.1,t.value=10,o.changeVolumeIndicator(10);break;case 50:case 98:audio.volume=.2,t.value=20,o.changeVolumeIndicator(20);break;case 51:case 99:audio.volume=.3,t.value=30,o.changeVolumeIndicator(30);break;case 52:case 100:audio.volume=.4,t.value=40,o.changeVolumeIndicator(40);break;case 53:case 101:audio.volume=.5,t.value=50,o.changeVolumeIndicator(50);break;case 54:case 102:audio.volume=.6,t.value=60,o.changeVolumeIndicator(60);break;case 55:case 103:audio.volume=.7,t.value=70,o.changeVolumeIndicator(70);break;case 56:case 104:audio.volume=.8,t.value=80,o.changeVolumeIndicator(80);break;case 57:case 105:audio.volume=.9,t.value=90,o.changeVolumeIndicator(90)}});